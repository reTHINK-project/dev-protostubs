<html>

<head>
    <title>SystemJS example with moment.js</title>
    <meta charset="UTF-8">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/3.1.6/system.min.js"></script>

    <script>

        window.onload = function () {
            var url1 = "http://localhost:8080/.well-known/idp-proxy/google.com.idp.js";
            var url2 = "http://localhost:8080/.well-known/protocolstub/default.ps.js";
            var url3 = "http://localhost:8080/.well-known/protocolstub/localhost.ps.js";

            var _this = this;

            var load = function (url) {

                return new Promise(function (resolve, reject) {
                    System.import(url).then(function (result) {

                        var instance = new result.default();
                        resolve(instance);

                    }).catch(function (reason) {
                        console.error(reason);
                        reject();
                    });

                });

            }

            load(url1).then(function (module) {
                console.log('import2 result ' + module.name);

            })


            load(url2).then(function (module) {
                console.log('import2 result ' + module.name);

                load(url3).then(function (module) {
                    console.log('import3 result ' + module.name);

                })

            })



        };

    </script>
</head>

<body>
</body>

</html>